version: "3.9"
services:
  db:
    x-k8s:
      disabled: false
      service:
        type: None
      workload:
        autoscale:
          cpuThreshold: 70
          memThreshold: 70
        imagePull:
          policy: IfNotPresent
        livenessProbe:
          exec:
            command:
            - echo
            - Define healthcheck command for service
          failureThreshold: 3
          initialDelay: 1m0s
          period: 1m0s
          timeout: 10s
          type: exec
        readinessProbe:
          failureThreshold: 3
          initialDelay: 1m0s
          period: 1m0s
          timeout: 10s
          type: none
        replicas: 1
        resource:
          cpu: "0.1"
          maxCpu: "0.5"
          maxMemory: 500Mi
          memory: 10Mi
        restartPolicy: Always
        rollingUpdateMaxSurge: 1
        serviceAccountName: default
        type: StatefulSet
volumes:
  db_data:
    x-k8s:
      size: 100Mi
